(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{648:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(157),o=a.n(r),l=a(446),s=a(645),c=a(447),u=a(629),m=a(407),d=a(640),p=a(644),g=a(470),h=a(559),f=a.n(h),y=a(560),b=a(55),v=a(86),E=a(490),_=a.n(E);function k(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var w=o()({root:{width:"100%",padding:"1.25rem"},iframe:{},statViz:{display:"none"}});function C(e){var t=e.title,a=e.description,n=e.chartId,r=e.iframeKey,o=e.showInsight,l=e.insightSummary,s=e.insightTitle,c=e.dataLinkTitle,u=e.analysisCountry,m=e.dataGeoId,d=e.analysisLinkTitle,p=k(e,["title","description","chartId","iframeKey","showInsight","insightSummary","insightTitle","dataLinkTitle","analysisCountry","dataGeoId","analysisLinkTitle"]),g=w(p);return i.a.createElement(_.a,{hideInsight:!o,key:n,loading:!1,title:t,description:a,embedCode:"embed text",actions:{handleShare:function(){}},classes:{highlightGrid:g.statViz},variant:o?"data":"analysis",insight:o?{description:l,title:s,analysisLink:u?{href:"/profiles/".concat(u),title:d}:null,dataLink:m?{href:"/profiles/".concat(m),title:c}:null}:{}},i.a.createElement("div",null),i.a.createElement("div",{className:g.root},i.a.createElement("iframe",{key:r,frameBorder:"0",scrolling:"no",title:t,onLoad:function(e){var t=e.target;if(t){console.log(t),console.log(t.contentDocument),console.log(t.contentWindow.document);var a=t.contentDocument.getElementById("wrapper")||t.contentDocument.getElementById("flourish-popup-constrainer"),n=a&&a.offsetHeight>420?a.offsetHeight:420;t.style.height="".concat(n,"px"),t.contentDocument.body.style.background="rgb(0,0,0) !important";var i=t.contentDocument.getElementsByClassName("flourish-header");i&&i.length&&(i[0].style.display="none")}},src:"/wp-json/hurumap-data/flourish/".concat(n,"/"),className:g.iframe})))}C.propTypes={title:v.a.string,description:v.a.string,chartId:v.a.string,iframeKey:v.a.number,showInsight:v.a.bool,insightSummary:v.a.string,insightTitle:v.a.string,dataLinkTitle:v.a.string,analysisCountry:v.a.string,dataGeoId:v.a.string,analysisLinkTitle:v.a.string},C.defaultProps={title:void 0,description:void 0,chartId:void 0,iframeKey:void 0,showInsight:void 0,insightSummary:void 0,insightTitle:void 0,dataLinkTitle:void 0,analysisCountry:void 0,dataGeoId:void 0,analysisLinkTitle:void 0};var I=C,T={countries:[{iso_code:"BF",name:"Burkina Faso",iso_name:"Burkina Faso",short_name:"Burkina Faso",slug:"burkina-faso",published:!0},{iso_code:"CD",name:"Democratic Republic of Congo",iso_name:"Congo, the Democratic Republic of the",short_name:"DR Congo",slug:"democratic-republic-of-congo",published:!0},{iso_code:"ET",name:"Ethiopia",iso_name:"Ethiopia",short_name:"Ethiopia",slug:"ethiopia",published:!0},{iso_code:"KE",name:"Kenya",iso_name:"Kenya",short_name:"Kenya",slug:"kenya",published:!0},{iso_code:"NG",name:"Nigeria",iso_name:"Nigeria",short_name:"Nigeria",slug:"nigeria",published:!0},{iso_code:"SN",name:"Senegal",iso_name:"Senegal",short_name:"Senegal",slug:"senegal",published:!0},{iso_code:"ZA",name:"South Africa",iso_name:"South Africa",short_name:"South Africa",slug:"south-africa",published:!0},{iso_code:"TZ",name:"Tanzania",iso_name:"Tanzania, United Republic of",short_name:"Tanzania",slug:"tanzania",published:!0},{iso_code:"UG",name:"Uganda",iso_name:"Uganda",short_name:"Uganda",slug:"uganda",published:!0},{iso_code:"ZM",name:"Zambia",iso_name:"Zambia",short_name:"Zambia",slug:"zambia",published:!0}]};function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var D=o()({root:{flexGrow:1,padding:"20px"},deleteButton:{color:"white",backgroundColor:"rgb(191, 42, 60)"},uploadDiv:{display:"flex",backgroundColor:"transparent",border:"4px dashed grey",padding:"6px 16px",height:"80px",minWidth:"60px",borderRadius:"4px"},successFile:{color:"#155724"},rejectedFile:{color:"#721c24"},dropContainer:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",display:"flex"},iframe:{width:"100%"}});function O(e){var t=e.chart,a=e.onChange,r=e.onDelete,o=D(),h=x(Object(n.useState)(0),2),v=h[0],E=h[1],_=Object(n.useCallback)((function(e){var t,n,i,r,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(!(e.length>0)){l.next=13;break}return(t=new FormData).append("file",e[0],e[0].name),l.next=5,regeneratorRuntime.awrap(Object(b.c)(t));case 5:return n=l.sent,l.next=8,regeneratorRuntime.awrap(n.json());case 8:i=l.sent,r=i.id,o=i.name,a({name:o,media_id:r,published:!1}),E(v+1);case 13:case"end":return l.stop()}}))}),[a,v]),k=Object(y.a)({onDrop:_,accept:"application/zip",minSize:0,multiple:!1}),w=k.isDragActive,C=k.getRootProps,O=k.getInputProps,S=k.isDragReject,N=k.acceptedFiles,L=x(Object(n.useState)(t.title),2),R=L[0],B=L[1],F=x(Object(n.useState)(t.description),2),z=F[0],K=F[1];return i.a.createElement(m.a,null,i.a.createElement(c.a,{container:!0,className:o.root,spacing:2},i.a.createElement(c.a,{item:!0,md:4},i.a.createElement(c.a,{container:!0,direction:"column",spacing:2},i.a.createElement(c.a,{item:!0},i.a.createElement(d.a,{shrink:!0},"Country"),i.a.createElement(g.a,{placeholder:"Country",value:t.country&&{value:t.country,label:T.countries.find((function(e){return e.slug===t.country})).name},options:T.countries.map((function(e){return{label:e.name,value:e.slug}})),onChange:function(e){var t=e.value;a({country:t,published:!1})}})),i.a.createElement(c.a,{item:!0},i.a.createElement(s.a,{fullWidth:!0,label:"Title",type:"text",value:R,InputLabelProps:{shrink:!0},onChange:function(e){return B(e.target.value)},onBlur:function(e){B(e.target.value),a({title:e.target.value,published:!1})}})),i.a.createElement(c.a,{item:!0},i.a.createElement(s.a,{fullWidth:!0,label:"Description",type:"text",multiline:!0,rows:"3",value:z,InputLabelProps:{shrink:!0},onChange:function(e){return K(e.target.value)},onBlur:function(e){K(e.target.value),a({description:e.target.value,published:!1})}})),i.a.createElement(c.a,{item:!0},i.a.createElement("div",{className:o.uploadDiv},i.a.createElement("div",j({},C(),{className:o.dropContainer}),i.a.createElement("input",O()),!w&&0===N.length&&i.a.createElement(u.a,null,t.name?t.name:"Drag a file or click to upload!"),w&&!S&&i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,null),i.a.createElement(u.a,null," Drop file to upload!")),S&&i.a.createElement(u.a,{className:o.rejectedFile},"File type not accepted, sorry!"),N.length>0&&i.a.createElement(u.a,{className:o.successFile},N[0].name)))),i.a.createElement(c.a,{item:!0},i.a.createElement(c.a,{container:!0,justify:"flex-end",alignItems:"center",spacing:4},i.a.createElement(c.a,{item:!0},i.a.createElement(c.a,{container:!0,spacing:1,component:"label",alignItems:"center"},i.a.createElement(c.a,{item:!0},"Draft"),i.a.createElement(c.a,{item:!0},i.a.createElement(p.a,{defaultChecked:!1,checked:"1"===t.published||!0===t.published,onChange:function(e,t){a({published:t}),E(v+1)}})),i.a.createElement(c.a,{item:!0},"Published"))),i.a.createElement(c.a,{item:!0},i.a.createElement(c.a,{container:!0,alignItems:"center"},i.a.createElement(l.a,{className:o.deleteButton,onClick:function(){return r()}},"Delete"))))))),i.a.createElement(c.a,{item:!0,md:8},t.media_id&&0!==t.media_id&&i.a.createElement(I,{chartId:t.id,title:R,description:z,iframeKey:v,classes:{iframe:o.iframe}}))))}O.propTypes={onChange:v.a.func.isRequired,onDelete:v.a.func.isRequired,chart:v.a.shape({id:v.a.string,published:v.a.oneOfType([v.a.string,v.a.bool]),title:v.a.string,country:v.a.string,name:v.a.string,description:v.a.string,media_id:v.a.oneOfType([v.a.string,v.a.number])}).isRequired};t.default=O}}]);